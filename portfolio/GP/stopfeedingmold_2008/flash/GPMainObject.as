// 6.2.05// 7.8.05// GP MOVIE MAIN OBJECT MANAGER  dynamic class GPMainObject extends managers.MovieSetup{		// variables specific to this instance of moviesetup	public var SiteGround:MovieClip;		var MainContainer:MovieClip;	var TransitionCtrl:Object;	var FooterArea:MovieClip;		var MenuArea:MovieClip;	var LogoArea:MovieClip;	var PageArea:MovieClip;	function GPMainObject(objParam:Object){					MainRoot = _level0;		var objRef = this;			strRootPath = (objParam.strRootPath != undefined)? objParam.strRootPath : "";			strDataPath = (_global.siteTestRoot != undefined)? _global.siteTestRoot+"/datasource/" : strRootPath+"/datasource/";			strProcessPath = strRootPath+"/processors/";// 			strCSSPath = strRootPath+"/includes/css/";						//make sure stage is set to correct size		sizeStage(objParam.bolFullScreen, objParam.strScreenMode, objParam.strScreenAlign);				// start loader and set criteria that main is not built		this.MainLoader = addLoader({setCrit:"mainBuilt", strRefName:"MainLoader", bolEntry:true});					// loop and load any needed style sheets			if(objParam.cssFiles != undefined){ aryStyles = []; getCSSStyle(objParam.cssFiles); }					// 				var strDataStoreName = "MenuXML";		var strDataSource = objParam.strDataFile;		var strTmpFilePath:String = (strDataSource.indexOf(".asp") != -1)? strProcessPath : strDataPath;		var strFullDataPath = strTmpFilePath + strDataSource;				var fncXMLComplete:Function = function(){			objRef.MainLoader.setCriteria("MenuXML",true);			objRef.buildMain();		};				var fncXMLParse:Function = (objParam.fncXMLParse != undefined)? objParam.fncXMLParse : function(){			var xmlRoot = this.firstChild;				for(var i:Number=0;i< xmlRoot.childNodes.length;i++){					var xmlNode = xmlRoot.childNodes[i];//global info					objRef[xmlNode.nodeName] = this.storeNodes(xmlNode);						if(xmlNode.nodeName == "slideshow"){						objRef.slideshowinfo = {};						this.extractXMLAttributes(objRef.slideshowinfo, xmlNode);					}					if(xmlNode.nodeName == "userinfo"){						objRef.userinfo = {};						this.extractXMLAttributes(objRef.userinfo, xmlNode);					}				}							};				var objForXLGet:Object = { strName:strDataStoreName, strFullPath:strFullDataPath,			bolParseIntoObjAry:true, bolRemoveWhenDone:true, bolLoader:true,			objStoreLocation:objRef, objParent:objRef, 			fncParseFunction:fncXMLParse, fncCompleteFunction:fncXMLComplete }					// load xml data		objRef[strDataStoreName] = getXmlData(objForXLGet);							//----------		cleanUpRoot();// cleanup root from any passed variables				//----init  penners used		var ease1 = robertpenner.Cubic;		var ease2 = robertpenner.Quad;		var ease3 = robertpenner.Linear;		var ease4 = robertpenner.Back;		var ease5 = robertpenner.Expo;	}				function buildMain():Void{				//trace("[MAINOBJECT] buildMain()");		// load sounds		//this.MainLoader.setCriteria("sound0",false);		this.objNavSoundMan = new managers.SoundManager(this.siteinfo.all_sounds, true, 15, this.siteinfo.all_sounds_vols);		structureMain();				var objExtras = new controllers.MovieClipExtras();		var objAddText = new misc.McAddText();		var objDraw = new misc.DrawShape();				var containerH:Number = Number(this.siteinfo.maincontainer.h);		var containerW:Number = Number(this.siteinfo.maincontainer.w);		var pageH:Number = Number(this.siteinfo.pagearea.h);		var pageW:Number = Number(this.siteinfo.pagearea.w);		var pageX:Number = Number(this.siteinfo.pagearea.x);				LogoArea.attachMovie("LogoShadow", "shadow_mc", -1);			LogoArea.attachMovie("LogoText", "logoText_mc", 3, {_x:22, _y:20});			//LogoArea.attachMovie("GPLogo", "gpLogo_mc", 0, {_x:5, _y:260, endy:260});// will start at 0		var mcLogoGround:MovieClip = LogoArea.createEmptyMovieClip("ground_mc", 1);			objDraw.doDraw({w:283, h:109, fillColor:this.siteinfo.hex_colors[2], fillAlpha:100}, mcLogoGround);			objDraw.doDraw({x:7,y:7,w:269, h:95, lnColor:this.siteinfo.hex_colors[0], lnAlpha:100, lnSize:2}, mcLogoGround);			var objRef = this;			LogoArea.onRelease = function(){ objRef.showHomePage() }			LogoArea.enabled = false;						MenuArea.addEventListener("onMenuClick", PageArea);			MenuArea.addEventListener("onMenuClick", TransitionCtrl);			MenuArea.init(this.siteinfo.menuarea, this.sections);									PageArea.init(this.siteinfo.pagearea, this.sections[0] );// send home as default info obj			PageArea.addEventListener("showPage", TransitionCtrl);			PageArea.setMask(TransitionCtrl.TransRoot);			TransitionCtrl.addEventListener("onTransitionComplete", PageArea);						TransitionCtrl.init({mX:-(pageW/2) + (pageX/2), mY:-(pageH/2 + 1), mW:pageW+pageX, mH:pageH+4});		//		// build out footer		var tfFooter = this.siteinfo.text_formats[4];		var strFootText = this.footer.contenttext; //this.siteinfo.footer.contenttext			var objFootTxt:Object = {y:10,txtW:Number(this.siteinfo.pagearea.w), txtName:"footer", strTextValue:strFootText, txtFormat:tfFooter,  embedFont:true, bolWrapText:true, bolSelectable:false, strAutoSize:"left", bolHtmlText:true, bolBorder:false, bolGround:false, css:this.aryStyles["footer"]};		var tmpText = objAddText.addTextField(objFootTxt, FooterArea);			objDraw.doDraw({w:containerW, h:0, lnColor:this.siteinfo.hex_colors[2], lnAlpha:100, shape:"line"}, FooterArea);			tmpText._x = 190;//Math.round((containerW - tmpText._width)/2)						// tell loader we are built		this.MainLoader.setCriteria("mainBuilt",true);	}					// STRUCTURE MOVIE	function structureMain():Void{		//trace("[MAIN OBJECT] structureMain("+this.siteinfo.maincontainer.y+")");		var objDraw = new misc.DrawShape();		var mainContainerW:Number = Number(this.siteinfo.maincontainer.w);		var mainContainerH:Number = Number(this.siteinfo.maincontainer.h);		var mainContainerY:Number = Number(this.siteinfo.maincontainer.y);		var pageAreaX:Number = Number(this.siteinfo.pagearea.x);		var pageAreaY:Number = Number(this.siteinfo.pagearea.y);		var pageAreaH:Number = Number(this.siteinfo.pagearea.h);				var logoAreaY:Number = Number(this.siteinfo.logoarea.y);						var footerAreaY:Number = Math.round(pageAreaH);				var menuAreaX:Number = Number(this.siteinfo.menuarea.x);		var menuAreaY:Number = Number(this.siteinfo.menuarea.y);		var menuAreaW:Number = Number(this.siteinfo.menuarea.w);						SiteGround = MainRoot.attachMovie("SiteGround", "ground_mc", 0, {_x:Stage.width/2, _alpha:0,_visible:false});// 			MainContainer = MainRoot.attachMovie("EmptyClip","mainContainer_mc", 10,{_x:Stage.width/2,_y:mainContainerY});//					var offSetX = -(mainContainerW/2);//to account for centering main on 0			this.sections[0].mcBtn = LogoArea = MainContainer.attachMovie("EmptyClip","logoArea_mc", 50, {_visible:false, _x:offSetX, _y:logoAreaY});							MenuArea = MainContainer.attachMovie("MenuArea", "menuArea_mc", 15,{_x:offSetX-(menuAreaW+50), endX:offSetX+menuAreaX,  _y:menuAreaY, _alpha:0});		var mcMenuMask = MainContainer.attachMovie("EmptyClip", "menuMask_mc",16, { _x:offSetX+menuAreaX, _y:menuAreaY});				objDraw.doDraw({w:mainContainerW, h:pageAreaH, fillColor:0x333333, fillAlpha:100}, mcMenuMask);			MenuArea.setMask(mcMenuMask);				var mcTransHolder = MainContainer.attachMovie("EmptyClip", "transitionArea_mc",10, { _y:(mainContainerH/2) - (mainContainerY/2)});				TransitionCtrl = new TransitionController(mcTransHolder);			Stage.addListener(TransitionCtrl);						PageArea = MainContainer.attachMovie("PageArea", "pageArea_mc", 5, {_x:(offSetX+pageAreaX), _y:pageAreaY});						FooterArea = MainContainer.attachMovie("EmptyClip", "footer_mc", 0,{_x:offSetX, _y:footerAreaY, _visible:false});				}		function onLoaderComplete():Void{		trace("[MAINOBJECT] onLoaderComplete() -------->");		var tweenCtrl = new effects.ZigoTweener();		delete this.MainLoader;		tweenCtrl.tween(SiteGround,["_alpha"], [70], .7, "Quad.easeOut", 0,{func:beginMain, scope:this});	}	//BEGIN MAIN		function beginMain():Void{			trace("[MAIN OBJECT] beginMain()");		var tweenCtrl = new effects.ZigoTweener();		setStageItemsPositions();		// make sure everything is in position before showing		SiteGround._visible = true;				// enter logo - page pull?		LogoArea._visible = true;		/* enter menu slide out menu		tweenCtrl.tween(MenuArea,["_alpha"], [100], .5, "Quad.easeOut", 0);		_global.MainObj.objNavSoundMan.playSound(0);		tweenCtrl.tween(MenuArea,["_x"], [MenuArea.endX], 1, "Back.easeOut",.2, {func:showHomePage, scope:this, args:[true]}, 2);		*/				FooterArea._visible = true;		showHomePage(true);		//MenuArea.setNewInfo(this.sections[0]);			}		function showHomePage(f:Boolean){ MenuArea.onMenuClick(0,f); }		private function cleanUpRoot():Void{		super.cleanUpRoot();	}		function reportClick(s:String):Void{		trace("[Main Object] reportClick("+s+")");		var lvReport = new LoadVars();			lvReport.buffer = "-";			lvReport.src = s;			lvReport.buffer2 = "-";		var strReportURL = "/processors/proc_SourceClick.asp";//?src= + s		lvReport.sendAndLoad(strReportURL, lvReport, "Get");		}		//POSITION STAGE ITEMS	private function setStageItemsPositions():Void{		var centerX = Math.round(Stage.width/2);			MainContainer._x = SiteGround._x = centerX;		if(this.MainLoader != undefined) this.MainLoader._x = centerX;	}				// end class}