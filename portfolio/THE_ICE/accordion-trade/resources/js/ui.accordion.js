/*
 * jQuery UI Accordion
 * 
 * Copyright (c) 2007, 2008 JÃ¶rn Zaefferer
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Accordion
 *
 * Depends:
 *	ui.core.js
 */
!function(e){function t(e,t){return function(){return e.apply(t,arguments)}}function i(t){if(e.data(this,"accordion")){var i=e.data(this,"accordion"),a=i.options;a.running=t?0:--a.running,a.running||(a.clearStyle&&a.toShow.add(a.toHide).css({height:"",overflow:""}),e(this).triggerHandler("accordionchange",[null,a.data],a.change))}}function a(a,n,o,s,r){var d=e.data(this,"accordion").options;d.toShow=a,d.toHide=n,d.data=o;var h=t(i,this);d.running=0===n.size()?a.size():n.size(),d.animated?!d.alwaysOpen&&s?e.ui.accordion.animations[d.animated]({toShow:jQuery([]),toHide:n,complete:h,down:r,autoHeight:d.autoHeight}):e.ui.accordion.animations[d.animated]({toShow:a,toHide:n,complete:h,down:r,autoHeight:d.autoHeight}):(!d.alwaysOpen&&s?a.toggle():(n.hide(),a.show()),h(!0))}function n(t){var i=e.data(this,"accordion").options;if(i.disabled)return!1;if(!t.target&&!i.alwaysOpen){i.active.parent().andSelf().toggleClass(i.selectedClass);var n=i.active.next(),o={options:i,newHeader:jQuery([]),oldHeader:i.active,newContent:jQuery([]),oldContent:n},s=i.active=e([]);return a.call(this,s,n,o),!1}var r=e(t.target);r=e(r.parents(i.header)[0]||r);var d=r[0]==i.active[0];if(i.running||i.alwaysOpen&&d)return!1;if(r.is(i.header)){i.active.parent().andSelf().toggleClass(i.selectedClass),d||r.parent().andSelf().addClass(i.selectedClass);var s=r.next(),n=i.active.next(),o={options:i,newHeader:r,oldHeader:i.active,newContent:s,oldContent:n},h=i.headers.index(i.active[0])>i.headers.index(r[0]);return i.active=d?e([]):r,a.call(this,s,n,o,d,h),!1}}function o(t,i){return void 0!=i?"number"==typeof i?t.filter(":eq("+i+")"):t.not(t.not(i)):i===!1?e([]):t.filter(":eq(0)")}e.widget("ui.accordion",{init:function(){var t=this.options;if(t.navigation){var i=this.element.find("a").filter(t.navigationFilter);i.length&&(i.filter(t.header).length?t.active=i:(t.active=i.parent().parent().prev(),i.addClass("current")))}t.headers=this.element.find(t.header),t.active=o(t.headers,t.active),e.browser.msie&&this.element.find("a").css("zoom","1"),this.element.hasClass("ui-accordion")||(this.element.addClass("ui-accordion"),e("<span class='ui-accordion-left'/>").insertBefore(t.headers),e("<span class='ui-accordion-right'/>").appendTo(t.headers),t.headers.addClass("ui-accordion-header").attr("tabindex","0"));var a;if(t.fillSpace){a=this.element.parent().height(),t.headers.each(function(){a-=e(this).outerHeight()});var s=0;t.headers.next().each(function(){s=Math.max(s,e(this).innerHeight()-e(this).height())}).height(a-s)}else t.autoHeight&&(a=0,t.headers.next().each(function(){a=Math.max(a,e(this).outerHeight())}).height(a));t.headers.not(t.active||"").next().hide(),t.active.parent().andSelf().addClass(t.selectedClass),t.event&&this.element.bind(t.event+".accordion",n)},activate:function(e){n.call(this.element[0],{target:o(this.options.headers,e)[0]})},destroy:function(){this.options.headers.next().css("display",""),(this.options.fillSpace||this.options.autoHeight)&&this.options.headers.next().css("height",""),e.removeData(this.element[0],"accordion"),this.element.removeClass("ui-accordion").unbind(".accordion")}}),e.extend(e.ui.accordion,{defaults:{selectedClass:"selected",alwaysOpen:!0,animated:"slide",event:"click",header:"a",autoHeight:!0,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(t,i){if(t=e.extend({easing:"swing",duration:300},t,i),!t.toHide.size())return t.toShow.animate({height:"show"},t),void 0;var a=t.toHide.height(),n=t.toShow.height(),o=n/a;t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate({height:"hide"},{step:function(i){var n=(a-i)*o;(e.browser.msie||e.browser.opera)&&(n=Math.ceil(n)),t.toShow.height(n)},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height","auto"),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"bounceout":"swing",duration:e.down?1e3:200})},easeslide:function(e){this.slide(e,{easing:"easeinout",duration:700})}}}),e.fn.activate=function(e){return this.accordion("activate",e)}}(jQuery);