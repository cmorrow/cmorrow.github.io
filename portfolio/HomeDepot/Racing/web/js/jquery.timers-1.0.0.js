jQuery.fn.extend({everyTime:function(e,r,i,t,n){return this.each(function(){jQuery.timer.add(this,e,r,i,t,n)})},oneTime:function(e,r,i){return this.each(function(){jQuery.timer.add(this,e,r,i,1)})},stopTime:function(e,r){return this.each(function(){jQuery.timer.remove(this,e,r)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(void 0==e||null==e)return null;var r=this.regex.exec(jQuery.trim(e.toString()));if(r[2]){var i=parseInt(r[1],10),t=this.powers[r[2]]||1;return i*t}return e},add:function(e,r,i,t,n,s){var o=0;if(jQuery.isFunction(i)&&(n||(n=t),t=i,i=r),r=jQuery.timer.timeParse(r),!("number"!=typeof r||isNaN(r)||0>=r)){n&&n.constructor!=Number&&(s=!!n,n=0),n=n||0,s=s||!1,e.$timers||(e.$timers={}),e.$timers[i]||(e.$timers[i]={}),t.$timerID=t.$timerID||this.guid++;var u=function(){s&&this.inProgress||(this.inProgress=!0,(++o>n&&0!==n||t.call(e,o)===!1)&&jQuery.timer.remove(e,i,t),this.inProgress=!1)};u.$timerID=t.$timerID,e.$timers[i][t.$timerID]||(e.$timers[i][t.$timerID]=window.setInterval(u,r)),this.global[i]||(this.global[i]=[]),this.global[i].push(e)}},remove:function(e,r,i){var t,n=e.$timers;if(n){if(r){if(n[r]){if(i)i.$timerID&&(window.clearInterval(n[r][i.$timerID]),delete n[r][i.$timerID]);else for(var i in n[r])window.clearInterval(n[r][i]),delete n[r][i];for(t in n[r])break;t||(t=null,delete n[r])}}else for(r in n)this.remove(e,r,i);for(t in n)break;t||(e.$timers=null)}}}}),jQuery.browser.msie&&jQuery(window).one("unload",function(){var e=jQuery.timer.global;for(var r in e)for(var i=e[r],t=i.length;--t;)jQuery.timer.remove(i[t],r)});